!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"https://code.kmf.com/dist/libs/fe-log/==typeof define&&define.amd?define(n):(e=e||self).XesLoggerSDK=n()}(this,function(){"use strict";var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues){var n=new Uint8Array(16);a=function(){return e.getRandomValues(n),n}}var t=new Array(16);function a(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),t[n]=e>>>((3&n)<<3)&255;return t}for(var c=[],r=0;r<256;++r)c[r]=(r+256).toString(16).substr(1);function i(e,n,t){var r=n&&t||0;"string"==typeof e&&(n="binary"==e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var i=0;i<16;++i)n[r+i]=o[i];return n||function(e,n){var t=n||0,r=c;return r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]}(o)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,n,t){e.attachEvent?e.attachEvent("on"+n,t):e.addEventListener(n,t,!1)}function u(){return window.location.hash.split("?")[0].split("#/")[1]||""}function d(){return(window.screen.width||0)+"/"+(window.screen.height||0)}function l(){var e=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.offsetHeight||0;return(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.offsetWidth||0)+"/"+e}function p(){var e=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.offsetHeight||0;return(Math.ceil((document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop)/e)+1).toString()}function g(e){for(var n=e.offsetTop,t=e.offsetLeft,r=e.offsetParent;r;)n+=r.offsetTop,t+=r.offsetLeft,r=r.offsetParent;return{left:t,top:n}}function m(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function h(e){if(e){var n={},t=[];t=(t=e.split("&")).filter(function(e){return/\w+=\w*/.test(e)});for(var r=0;r<t.length;r++)n[t[r].split("=")[0].toLowerCase()]=t[r].split("=")[1];return n}return[]}function o(c,s){!function(e,n){var t=[],r=!1,o=!1;function i(){if(!r){r=!0;for(var e=0;e<t.length;e++)t[e].fn.call(window,t[e].ctx);t=[]}}if("function"!=typeof e)throw new TypeError("callback for docReady(fn) must be a function");r?setTimeout(function(){e(n)},1):(t.push({fn:e,ctx:n}),"complete"===document.readyState?setTimeout(i,1):o||(document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)),o=!0))}(function(){!function(e,n,c,s){var u=document.querySelector(e);f(u,n,function(e){for(var n=u.querySelectorAll(c),t=e.target,r=0,o=n.length;r<o;r++)for(var i=t,a=n[r];i&&i!==u;){if(i===a)return s.call(a,e);i=i.parentNode}})}("body","click","*[data-xeslog-params]",function(e){var n=this.tagName.toLowerCase().toString(),t=this.getAttribute("data-xeslog-params")||"";"a"!==n||!this.getAttribute("href")||/^#{1,}$/gi.test(this.getAttribute("href").trim())||/^(javascript:).*$/gi.test(this.getAttribute("href").trim())||(t+="&targetHref="+this.getAttribute("href"));var r={elemname:n,posx:g(this).left.toString(),posy:g(this).top.toString(),currentpagescreen:p(),p_hight:m(),ajaxhref:""};if(Object.assign(r,s.param),s.hashchange&&s.hashchange.open&&s.hashchange.pvid&&"hash"===s.hashchange.pvid){var o=u();""===o&&(o="index"),o in s.hashchange.pageuid&&(r.pageuid=s.hashchange.pageuid[o].toString())}var i=h(t);for(var a in i)r[a]=i[a].toString();this.dataset["xeslog-enter"]&&"enter"===this.dataset["xeslog-enter"]&&f(this,"keydown",function(e){var n=e||window.event;n&&13===n.keyCode&&c(r,"b","click")}),c(r,"b","click")})})}function w(i,a){setTimeout(function(){var e={resolution:d(),pageviewsize:l(),currentpagescreen:p(),loadstatus:"success"};if(Object.assign(e,a.param),"string"==typeof window.courseDatanSerach||window.courseDatanSerach instanceof String){var n=h(window.courseDatanSerach);for(var t in n)e[t]=n[t].toString()}else if("object"===s(window.courseDatanSerach))for(var r in window.courseDatanSerach)e[r]=window.courseDatanSerach[r].toString();if(a.hashchange&&a.hashchange.open&&a.hashchange.pvid&&"hash"===a.hashchange.pvid){var o=u();""===o&&(o="index"),o in a.hashchange.pageuid&&(e.pageuid=a.hashchange.pageuid[o].toString()),o in a.hashchange.loadParam&&Object.assign(e,a.hashchange.loadParam[o])}i(e,"a","load")},300)}var v,y,S,b,x,k,E={},T=window.TraceKit,L=[].slice,N="?",C=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function O(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function j(e){return void 0===e}function A(e,n,t){var r=null;if(!n||E.collectWindowErrors){for(var o in S)if(O(S,o))try{S[o](e,n,t)}catch(e){r=e}if(r)throw r}}function _(e,n,t,r,o){if(x)E.computeStackTrace.augmentStackTraceWithInitialElement(x,n,t,e),M();else if(o)A(E.computeStackTrace(o),!0,o);else{var i,a={url:n,line:t,column:r},c=e;if("[object String]"==={}.toString.call(e)){var s=e.match(C);s&&(i=s[1],c=s[2])}a.func=E.computeStackTrace.guessFunctionName(a.url,a.line),a.context=E.computeStackTrace.gatherContext(a.url,a.line),A({name:i,message:c,mode:"onerror",stack:[a]},!0,null)}return!!v&&v.apply(this,arguments)}function M(){var e=x,n=b;b=x=null,A(e,!1,n)}function I(e){if(x){if(b===e)return;M()}var n=E.computeStackTrace(e);throw x=n,b=e,setTimeout(function(){b===e&&M()},n.incomplete?2e3:0),e}function H(e){if("string"!=typeof e)return[];if(!O(k,e)){var n="",t="";try{t=window.document.domain}catch(e){}var r=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(e);r&&r[2]===t&&(n=function(e){if(!E.remoteFetching)return"";try{var n=function(){try{return new window.XMLHttpRequest}catch(e){return new window.ActiveXObject("Microsoft.XMLHTTP")}}();return n.open("GET",e,!1),n.send(""),n.responseText}catch(e){return""}}(e)),k[e]=n?n.split("\n"):[]}return k[e]}function U(e,n){var t,r=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",a=H(e);if(!a.length)return N;for(var c=0;c<10;++c)if(!j(i=a[n-c]+i)){if(t=o.exec(i))return t[1];if(t=r.exec(i))return t[1]}return N}function P(e,n){var t=H(e);if(!t.length)return null;var r=[],o=Math.floor(E.linesOfContext/2),i=o+E.linesOfContext%2,a=Math.max(0,n-o-1),c=Math.min(t.length,n+i-1);n-=1;for(var s=a;s<c;++s)j(t[s])||r.push(t[s].length<100?t[s]:t[s].substr(0,100)+"...");return 0<r.length?r:null}function D(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function B(e){return D(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function $(e,n){for(var t,r,o=0,i=n.length;o<i;++o)if((t=H(n[o])).length&&(t=t.join("\n"),r=e.exec(t)))return{url:n[o],line:t.substring(0,r.index).split("\n").length,column:r.index-t.lastIndexOf("\n",r.index)-1};return null}function R(e,n,t){var r,o=H(n),i=new RegExp("\\b"+D(e)+"\\b");return t-=1,o&&o.length>t&&(r=i.exec(o[t]))?r.index:null}function X(e){if(!j(window&&window.document)){for(var n,t,r,o,i=[window.location.href],a=window.document.getElementsByTagName("script"),c=""+e,s=0;s<a.length;++s){var u=a[s];u.src&&i.push(u.src)}if(r=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(c)){var d=r[1]?"\\s+"+r[1]:"",l=r[2].split(",").join("\\s*,\\s*");n=D(r[3]).replace(/;$/,";?"),t=new RegExp("function"+d+"\\s*\\(\\s*"+l+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else t=new RegExp(D(c).replace(/\s+/g,"\\s+"));if(o=$(t,i))return o;if(r=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(c)){var f=r[1];if(n=B(r[2]),o=$(t=new RegExp("on"+f+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),i[0]))return o;if(o=$(t=new RegExp(n),i))return o}return null}}function F(e){if(!e.stack)return null;for(var n,t,r,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,s=/\((\S*)(?::(\d+))(?::(\d+))\)/,u=e.stack.split("\n"),d=[],l=/^(.*) is undefined$/.exec(e.message),f=0,p=u.length;f<p;++f){if(t=o.exec(u[f])){var g=t[2]&&0===t[2].indexOf("native");t[2]&&0===t[2].indexOf("eval")&&(n=s.exec(t[2]))&&(t[2]=n[1],t[3]=n[2],t[4]=n[3]),r={url:g?null:t[2],func:t[1]||N,args:g?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=a.exec(u[f]))r={url:t[2],func:t[1]||N,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=i.exec(u[f])))continue;t[3]&&-1<t[3].indexOf(" > eval")&&(n=c.exec(t[3]))?(t[3]=n[1],t[4]=n[2],t[5]=null):0!==f||t[5]||j(e.columnNumber)||(d[0].column=e.columnNumber+1),r={url:t[3],func:t[1]||N,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}!r.func&&r.line&&(r.func=U(r.url,r.line)),r.context=r.line?P(r.url,r.line):null,d.push(r)}return d.length?(d[0]&&d[0].line&&!d[0].column&&l&&(d[0].column=R(l[1],d[0].url,d[0].line)),{mode:"stack",name:e.name,message:e.message,stack:d}):null}function q(e,n,t,r){var o={url:n,line:t};if(o.url&&o.line){e.incomplete=!1,o.func||(o.func=U(o.url,o.line)),o.context||(o.context=P(o.url,o.line));var i=/ '([^']+)' /.exec(r);if(i&&(o.column=R(i[1],o.url,o.line)),0<e.stack.length&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,e.stack[0].context=o.context,!1}return e.stack.unshift(o),e.partial=!0}return!(e.incomplete=!0)}function W(e,n){for(var t,r,o,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],c={},s=!1,u=W.caller;u&&!s;u=u.caller)if(u!==J&&u!==E.report){if(r={url:null,func:N,args:[],line:null,column:null},u.name?r.func=u.name:(t=i.exec(u.toString()))&&(r.func=t[1]),void 0===r.func)try{r.func=t.input.substring(0,t.input.indexOf("{"))}catch(e){}if(o=X(u)){r.url=o.url,r.line=o.line,r.func===N&&(r.func=U(r.url,r.line));var d=/ '([^']+)' /.exec(e.message||e.description);d&&(r.column=R(d[1],o.url,o.line))}c[""+u]?s=!0:c[""+u]=!0,a.push(r)}n&&a.splice(0,n);var l={mode:"callers",name:e.name,message:e.message,stack:a};return q(l,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),l}function J(e,n){var t=null;n=null==n?0:+n;try{if(t=function(e){var n=e.stacktrace;if(n){for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,i=n.split("\n"),a=[],c=0;c<i.length;c+=2){var s=null;if((t=r.exec(i[c]))?s={url:t[2],line:+t[1],column:null,func:t[3],args:[]}:(t=o.exec(i[c]))&&(s={url:t[6],line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[]}),s){if(!s.func&&s.line&&(s.func=U(s.url,s.line)),s.line)try{s.context=P(s.url,s.line)}catch(e){}s.context||(s.context=[i[c+1]]),a.push(s)}}return a.length?{mode:"stacktrace",name:e.name,message:e.message,stack:a}:null}}(e))return t}catch(e){}try{if(t=F(e))return t}catch(e){}try{if(t=function(e){var n=e.message.split("\n");if(n.length<4)return null;var t,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of function script\s*$/i,a=[],c=window&&window.document&&window.document.getElementsByTagName("script"),s=[];for(var u in c)O(c,u)&&!c[u].src&&s.push(c[u]);for(var d=2;d<n.length;d+=2){var l=null;if(t=r.exec(n[d]))l={url:t[2],func:t[3],args:[],line:+t[1],column:null};else if(t=o.exec(n[d])){l={url:t[3],func:t[4],args:[],line:+t[1],column:null};var f=+t[1],p=s[t[2]-1];if(p){var g=H(l.url);if(g){var m=(g=g.join("\n")).indexOf(p.innerText);0<=m&&(l.line=f+g.substring(0,m).split("\n").length)}}}else if(t=i.exec(n[d])){var h=window.location.href.replace(/#.*$/,""),w=$(new RegExp(B(n[d+1])),[h]);l={url:h,func:"",args:[],line:w?w.line:t[1],column:null}}if(l){l.func||(l.func=U(l.url,l.line));var v=P(l.url,l.line),y=v?v[Math.floor(v.length/2)]:null;v&&y.replace(/^\s*/,"")===n[d+1].replace(/^\s*/,"")?l.context=v:l.context=[n[d+1]],a.push(l)}}return a.length?{mode:"multiline",name:e.name,message:n[0],stack:a}:null}(e))return t}catch(e){}try{if(t=W(e,n+1))return t}catch(e){}return{name:e.name,message:e.message,mode:"failed"}}function G(r){f(window,"unhandledrejection",function(e){if(e.reason){var n=E.computeStackTrace(e.reason);if(n.type="Script",n&&n.stack&&n.stack instanceof Array&&n.stack.length){var t=n.stack[0];n.url=t.url||"",n.line=t.line||"",n.col=t.column||"",n.fileName=t.url||"",n.msg=n.message||"",delete n.message,n.msg&&("string"==typeof n.msg||n.msg instanceof String)&&-1===n.msg.indexOf("Script error")&&r(n,"c","js")}}})}function V(n,e,t){var r,o;f(window,"hashchange",function(){t.hashchange&&t.hashchange.pvid&&"hash"===t.hashchange.pvid&&(e.pvid=i()||"",e.ajaxid=0,e.logorder=1,w(n,t))}),r=window.history,o=r.pushState,r.pushState=function(e){return"function"==typeof r.onpushstate&&r.onpushstate({state:e}),t.hashchange&&t.hashchange.pvid&&"hash"===t.hashchange.pvid&&(e.pvid=i()||"",e.ajaxid=0,e.logorder=1,w(n,t)),o.apply(r,arguments)}}function z(){for(var e=window.navigator.userAgent,n="",t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod","phone","pad","pod","BlackBerry","Mobile","webOS","ios"],r="web",o=0;o<t.length;o++)0<=e.indexOf(t[o])&&(/android|Linux/gi.test(e)?r="android":/\(i[^;]+;( U;)? CPU.+Mac OS X/gi.test(e)&&(r="ios"));switch(/XesCef/gi.test(e)&&(r="pc"),r){case"web":n="8";break;case"android":n="9";break;case"ios":n="10";break;case"pc":n="7"}return n}function K(a){f(window,"load",function(){var e,n=window.performance||window.msPerformance||window.webkitPerformance;if(n&&n.getEntriesByType&&(n.getEntriesByType("navigation")&&n.getEntriesByType("navigation")[0]?e=n.getEntriesByType("navigation")[0]:n&&n.timing&&(e=n.timing),e)){var t={type:"Performance-OL"};e.domainLookupEnd&&void 0!==e.domainLookupStart&&(t.dns=e.domainLookupEnd-e.domainLookupStart||0),e.connectEnd&&void 0!==e.connectStart&&(t.tcp=e.connectEnd-e.connectStart),e.responseStart&&void 0!==e.requestStart&&(t.ttfb=e.responseStart-e.requestStart),e.responseEnd&&e.responseStart&&(t.trans=e.responseEnd-e.responseStart),e.domInteractive&&e.responseEnd&&(t.dom=e.domInteractive-e.responseEnd),e.loadEventStart&&e.domContentLoadedEventEnd&&(t.res=e.loadEventStart-e.domContentLoadedEventEnd);var r=window.location;if(r&&"https:"===r.protocol&&e.connectEnd&&e.secureConnectionStart&&(t.ssl=e.connectEnd-e.secureConnectionStart),e.responseStart&&e.domainLookupStart&&(t.firstbyte=e.responseStart-e.domainLookupStart),e.responseEnd&&e.fetchStart&&(t.fp=e.responseEnd-e.fetchStart),e.domInteractive&&e.fetchStart&&(t.tti=e.domInteractive-e.fetchStart),e.domContentLoadedEventEnd&&e.fetchStart&&(t.ready=e.domContentLoadedEventEnd-e.fetchStart),e.loadEventStart&&e.fetchStart&&(t.load=e.loadEventStart-e.fetchStart),window.navigator&&window.navigator.connection&&(t.effectiveType=window.navigator.connection.effectiveType||"",t.downlink=window.navigator.connection.downlink||"",t.rtt=window.navigator.connection.rtt||""),window.navigator&&(t.platform=window.navigator.platform||""),n&&n.getEntries){var o=n.getEntries();for(var i in o)o[i].name&&"first-contentful-paint"===o[i].name&&o[i].startTime&&(t.fcp=1*o[i].startTime.toFixed(0)),o[i].name&&"first-paint"===o[i].name&&o[i].startTime&&(t.fp=1*o[i].startTime.toFixed(0))}if(void 0!==e.navigationStart?t.rd=e.fetchStart-e.navigationStart:void 0!==e.redirectEnd?t.rd=e.redirectEnd-e.redirectStart:t.rd=0,t.https=e.nextHopProtocol||"",n.navigation||e.type)if(e.type)switch(e.type){case"navigate":t.wherepage=0;break;case"back_forward":t.wherepage=2;break;case"reload":t.wherepage=1;break;case"prerender":t.wherepage=256;break;default:t.wherepage=0}else t.wherepage=n.navigation.type||"";a(t,"c","performance")}})}E.noConflict=function(){return window.TraceKit=T,E},E.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw E.report(e),e}}},E.report=(S=[],x=b=null,I.subscribe=function(e){!0!==y&&(v=window.onerror,window.onerror=_,y=!0),S.push(e)},I.unsubscribe=function(e){for(var n=S.length-1;0<=n;--n)S[n]===e&&S.splice(n,1);0===S.length&&(window.onerror=v,y=!1)},I),E.computeStackTrace=(k={},J.augmentStackTraceWithInitialElement=q,J.computeStackTraceFromStackProp=F,J.guessFunctionName=U,J.gatherContext=P,J.ofCaller=function(n){n=1+(null==n?0:+n);try{throw new Error}catch(e){return J(e,n+1)}},J.getSource=H,J),E.extendToAsynchronousCallbacks=function(){function e(e){var t=window[e];window[e]=function(){var e=L.call(arguments),n=e[0];return"function"==typeof n&&(e[0]=E.wrap(n)),t.apply?t.apply(this,e):t(e[0],e[1])}}e("setTimeout"),e("setInterval")},E.remoteFetching||(E.remoteFetching=!0),E.collectWindowErrors||(E.collectWindowErrors=!0),(!E.linesOfContext||E.linesOfContext<1)&&(E.linesOfContext=11);var Z={};function Y(e){var n={};switch(e){case"https://code.kmf.com/dist/libs/fe-log/live.xueersi.com":var t="",r="";0!==window.isArtsConfig&&window.isArtsConfig?1===window.isArtsConfig&&(0!==window.isPlayBack&&window.isPlayBack?1===window.isPlayBack&&(t="1000037",r="83453d00f5486862e97d75968045579b"):(t="1000034",r="de1647f61b853fb7361e02e5e99bed8f")):0!==window.isPlayBack&&window.isPlayBack?1===window.isPlayBack&&(t="1000036",r="0ce62906d89f19d7ec2b1cae9a2fed43"):(t="1000033",r="256ddeb9e5ebd9cf965ef659934518c2"),n={appid:t,appkey:r};break;case"https://code.kmf.com/dist/libs/fe-log/video.xueersi.com":var o="",i="";0!==window.isArtsConfig&&window.isArtsConfig?1===window.isArtsConfig&&(o="1000037",i="83453d00f5486862e97d75968045579b"):(o="1000036",i="0ce62906d89f19d7ec2b1cae9a2fed43"),n={appid:o,appkey:i};break;default:e in Z&&(n=Z[e])}return n}function Q(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}function ee(e,n,t,r,o,i){return Q(function(e,n){return e<<n|e>>>32-n}(Q(Q(n,e),Q(r,i)),o),t)}function ne(e,n,t,r,o,i,a){return ee(n&t|~n&r,e,n,o,i,a)}function te(e,n,t,r,o,i,a){return ee(n&r|t&~r,e,n,o,i,a)}function re(e,n,t,r,o,i,a){return ee(n^t^r,e,n,o,i,a)}function oe(e,n,t,r,o,i,a){return ee(t^(n|~r),e,n,o,i,a)}function ie(e,n){var t,r,o,i,a;e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var c=1732584193,s=-271733879,u=-1732584194,d=271733878;for(t=0;t<e.length;t+=16)s=oe(s=oe(s=oe(s=oe(s=re(s=re(s=re(s=re(s=te(s=te(s=te(s=te(s=ne(s=ne(s=ne(s=ne(o=s,u=ne(i=u,d=ne(a=d,c=ne(r=c,s,u,d,e[t],7,-680876936),s,u,e[t+1],12,-389564586),c,s,e[t+2],17,606105819),d,c,e[t+3],22,-1044525330),u=ne(u,d=ne(d,c=ne(c,s,u,d,e[t+4],7,-176418897),s,u,e[t+5],12,1200080426),c,s,e[t+6],17,-1473231341),d,c,e[t+7],22,-45705983),u=ne(u,d=ne(d,c=ne(c,s,u,d,e[t+8],7,1770035416),s,u,e[t+9],12,-1958414417),c,s,e[t+10],17,-42063),d,c,e[t+11],22,-1990404162),u=ne(u,d=ne(d,c=ne(c,s,u,d,e[t+12],7,1804603682),s,u,e[t+13],12,-40341101),c,s,e[t+14],17,-1502002290),d,c,e[t+15],22,1236535329),u=te(u,d=te(d,c=te(c,s,u,d,e[t+1],5,-165796510),s,u,e[t+6],9,-1069501632),c,s,e[t+11],14,643717713),d,c,e[t],20,-373897302),u=te(u,d=te(d,c=te(c,s,u,d,e[t+5],5,-701558691),s,u,e[t+10],9,38016083),c,s,e[t+15],14,-660478335),d,c,e[t+4],20,-405537848),u=te(u,d=te(d,c=te(c,s,u,d,e[t+9],5,568446438),s,u,e[t+14],9,-1019803690),c,s,e[t+3],14,-187363961),d,c,e[t+8],20,1163531501),u=te(u,d=te(d,c=te(c,s,u,d,e[t+13],5,-1444681467),s,u,e[t+2],9,-51403784),c,s,e[t+7],14,1735328473),d,c,e[t+12],20,-1926607734),u=re(u,d=re(d,c=re(c,s,u,d,e[t+5],4,-378558),s,u,e[t+8],11,-2022574463),c,s,e[t+11],16,1839030562),d,c,e[t+14],23,-35309556),u=re(u,d=re(d,c=re(c,s,u,d,e[t+1],4,-1530992060),s,u,e[t+4],11,1272893353),c,s,e[t+7],16,-155497632),d,c,e[t+10],23,-1094730640),u=re(u,d=re(d,c=re(c,s,u,d,e[t+13],4,681279174),s,u,e[t],11,-358537222),c,s,e[t+3],16,-722521979),d,c,e[t+6],23,76029189),u=re(u,d=re(d,c=re(c,s,u,d,e[t+9],4,-640364487),s,u,e[t+12],11,-421815835),c,s,e[t+15],16,530742520),d,c,e[t+2],23,-995338651),u=oe(u,d=oe(d,c=oe(c,s,u,d,e[t],6,-198630844),s,u,e[t+7],10,1126891415),c,s,e[t+14],15,-1416354905),d,c,e[t+5],21,-57434055),u=oe(u,d=oe(d,c=oe(c,s,u,d,e[t+12],6,1700485571),s,u,e[t+3],10,-1894986606),c,s,e[t+10],15,-1051523),d,c,e[t+1],21,-2054922799),u=oe(u,d=oe(d,c=oe(c,s,u,d,e[t+8],6,1873313359),s,u,e[t+15],10,-30611744),c,s,e[t+6],15,-1560198380),d,c,e[t+13],21,1309151649),u=oe(u,d=oe(d,c=oe(c,s,u,d,e[t+4],6,-145523070),s,u,e[t+11],10,-1120210379),c,s,e[t+2],15,718787259),d,c,e[t+9],21,-343485551),c=Q(c,r),s=Q(s,o),u=Q(u,i),d=Q(d,a);return[c,s,u,d]}function ae(e){var n,t="",r=32*e.length;for(n=0;n<r;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function ce(e){var n,t=[];for(t[(e.length>>2)-1]=void 0,n=0;n<t.length;n+=1)t[n]=0;var r=8*e.length;for(n=0;n<r;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function se(e){var n,t,r="0123456789abcdef",o="";for(t=0;t<e.length;t+=1)n=e.charCodeAt(t),o+=r.charAt(n>>>4&15)+r.charAt(15&n);return o}function ue(e){return unescape(encodeURIComponent(e))}function de(e){return function(e){return ae(ie(ce(e),8*e.length))}(ue(e))}function le(e,n){return function(e,n){var t,r,o=ce(e),i=[],a=[];for(i[15]=a[15]=void 0,16<o.length&&(o=ie(o,8*e.length)),t=0;t<16;t+=1)i[t]=909522486^o[t],a[t]=1549556828^o[t];return r=ie(i.concat(ce(n)),512+8*n.length),ae(ie(a.concat(r),640))}(ue(e),ue(n))}function fe(e,n,t){return n?t?le(n,e):function(e,n){return se(le(e,n))}(n,e):t?de(e):function(e){return se(de(e))}(e)}function pe(e){if(0<document.cookie.length){var n=document.cookie.indexOf(e+"=");if(-1!==n){n=n+e.length+1;var t=document.cookie.indexOf(";",n);return-1===t&&(t=document.cookie.length),unescape(document.cookie.substring(n,t))}}return""}function ge(e,n){var t=new Date;t.setDate(t.getDate()+365),window.document.cookie=e+"="+escape(n)+";expires="+t.toGMTString()+"; path=/; domain=xueersi.com"}function me(e,n,t,r,o){var i=window.document.domain,a=Y(i);o.appid&&i in o.appid&&(a=o.appid[i]);var c=a.appid||"",s=a.appkey||"",u=(new Date).getTime(),d=fe(c+"&"+u+s);return{content:function(e,n,t,r,o){var i,a=window.document.domain,c=Y(a);o.appid&&a in o.appid&&(c=o.appid[a]);var s=c.appid||"";i="a"===e||"b"===e?{data:he(n,r,o),logid:t||"",prelogid:pe("prelogid")||"",xesid:pe("xesId")||"",userid:pe("stu_id")||"",pageid:window.title||window.document.title||"",sessid:"",ua:window.navigator.userAgent||"",ip:window.returnCitySN||{cid:"",cip:"",cname:""},clientid:z(),clits:(new Date).getTime(),appid:s}:{data:he(n,r,o),xesid:pe("xesId")||"",userid:pe("stu_id")||"",pageid:window.title||window.document.title||"",sessid:"",ua:window.navigator.userAgent||"",ip:window.returnCitySN||"",clientid:z(),clits:(new Date).getTime(),appid:s};return i}(e,n,t,r,o),appid:c,sign:d,clits:u}}function he(e,n,t){return e.currenthref=window.location.href.toString(),e.logorder=(n.logorder++).toString(),e.rsd=(window.returnCitySN?window.returnCitySN.cip:"")+(window.navigator.userAgent||"")+(new Date).getTime(),!e.eventid&&t.common&&t.common.eventid&&(e.eventid=t.common.eventid),e}function we(e,n){if(window.__DEVELOPMENT__)switch(e){case"performance":window.document.getElementById("performance-msg")&&(window.document.getElementById("performance-msg").innerHTML="",window.document.getElementById("performance-msg").appendChild(window.document.createTextNode(JSON.stringify(n,null,3))));break;case"network":window.document.getElementById("network-msg")&&(window.document.getElementById("network-msg").innerHTML="",window.document.getElementById("network-msg").appendChild(window.document.createTextNode(JSON.stringify(n,null,3))));break;case"load":window.document.getElementById("load-msg")&&(window.document.getElementById("load-msg").innerHTML="",window.document.getElementById("load-msg").appendChild(window.document.createTextNode(JSON.stringify(n,null,3))));break;case"js":window.document.getElementById("runtime-msg")&&(window.document.getElementById("runtime-msg").innerHTML="",window.document.getElementById("runtime-msg").appendChild(window.document.createTextNode(JSON.stringify(n,null,3))));break;case"click":window.document.getElementById("click-msg")&&(window.document.getElementById("click-msg").innerHTML="",window.document.getElementById("click-msg").appendChild(window.document.createTextNode(JSON.stringify(n,null,3))));break;case"res":window.document.getElementById("resource-msg")&&(window.document.getElementById("resource-msg").innerHTML="",window.document.getElementById("resource-msg").appendChild(window.document.createTextNode(JSON.stringify(n,null,3))))}}var ve={network:{},js:{},res:{}};function ye(e,n){var t;switch(e){case"network":if(n&&n.resourceUrl){if(t="".concat(window.location.href.toString(),"|").concat(n.resourceUrl),ve.network[t])return!0;ve.network[t]=1}break;case"js":if(n&&n.msg){if(t="".concat(window.location.href.toString(),"|").concat(n.msg),ve.js[t])return!0;ve.js[t]=1}break;case"res":if(n&&n.XPath){if(t="".concat(window.location.href.toString(),"|").concat(n.XPath),ve.res[t])return!0;ve.res[t]=1}}return!1}function Se(o){return function(e){if("img"===o){(new window.Image).src=e.url}else{var n,t=document.createElement(o);t.src=e.url,(n=document.head).appendChild(t);var r=function(){n.removeChild(t)};t.onload=function(){r(),e.success&&e.success()},t.onerror=function(){r(),e.fail&&e.fail()}}}}function be(n){var t;if((n=n||{}).type=(n.type||"GET").toUpperCase(),n.dataType=n.dataType||"json",(t=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4===t.readyState){var e=t.status;200<=e&&e<300?n.success&&n.success(t.responseText,t.responseXML):n.fail&&n.fail(e)}},"GET"===n.type)t.open("GET",n.url,!0),t.send(null);else if("POST"===n.type){if(t.open("POST",n.url,!0),n.headers)for(var e in n.headers)t.setRequestHeader(e,n.headers[e]);t.send(n.data)}}var xe={method:{getImage:Se("img"),jsonp:Se("script"),post:function(e){be({type:"POST",url:e.url,data:e.data,headers:e.headers})},get:function(e){be({type:"GET",url:e.url,data:e.data,headers:e.headers})}}};function ke(i,a){return function(e,n,t){var r=me(n,e,pe("prelogid")||"",i,a);if(we(t,r),!ye(t,e)){var o=function(e,n){{if(e){var t=encodeURIComponent(JSON.stringify(e.content||{})),r=e.appid||"",o=e.sign||"",i=e.clits||"";return"https://log-landsat.kmf.com/appid/".concat(n,".gif?content=").concat(t,"&appid=").concat(r,"&sign=").concat(o,"&clits=").concat(i)}return""}}(r,n);xe.method.getImage({url:o})}}}function Ee(o,s){var u=[],d=[],l=[];function i(){var e,n,t=window.document.domain,r=Y(t);s.appid&&t in s.appid&&(r=s.appid[t]);var o=r.appid||"",i=r.appkey||"",a=(new Date).getTime(),c=fe(o+"&"+a+i);u.length&&(e="content=",n=u.splice(0,s.cacheUploader.batch||5),e+=JSON.stringify(n),xe.method.post({url:"https://log-landsat.kmf.com/appid/a.gif",data:e,headers:{"X-Log-TimeStamp":a.toString(),"X-Log-Sign":c,"X-Log-Appid":o}})),d.length&&(e="content=",n=d.splice(0,s.cacheUploader.batch||5),e+=JSON.stringify(n),xe.method.post({url:"https://log-landsat.kmf.com/appid/b.gif",data:e,headers:{"X-Log-TimeStamp":a.toString(),"X-Log-Sign":c,"X-Log-Appid":o}})),l.length&&(e="content=",n=l.splice(0,s.cacheUploader.batch||5),e+=JSON.stringify(n),xe.method.post({url:"https://log-landsat.kmf.com/appid/c.gif",data:e,headers:{"X-Log-TimeStamp":a.toString(),"X-Log-Sign":c,"X-Log-Appid":o}}))}setInterval(i,s.cacheUploader.interval);var e=navigator.userAgent.toLowerCase().match(/version\/(\d+).+?safari/)?"pagehide":"unload";return f(window,e,i),function(e,n,t){var r=me(n,e,pe("prelogid")||"",o,s);if(we(t,r),!ye(t,e))switch(n){case"a":u.push(r.content),u.length>=s.cacheUploader.batch&&i();break;case"b":d.push(r.content),d.length>=s.cacheUploader.batch&&i();break;default:l.length>=s.cacheUploader.batch&&i(),l.push(r.content)}}}function Te(){(xe.method.jsonp({url:"https://pv.sohu.com/cityjson?ie=utf-8",success:function(){ge("prelogid",pe("X-Request-Id")||fe((window.returnCitySN?window.returnCitySN.cip:"0.0.0.0")+"_"+(window.navigator.userAgent?window.navigator.userAgent:"userAgent")+"_"+(new Date).getTime()+"_xes")||"")},error:function(e){console.log("后台服务器获取ip出错".concat(e)),ge("prelogid",pe("X-Request-Id")||fe((window.returnCitySN?window.returnCitySN.cip:"0.0.0.0")+"_"+(window.navigator.userAgent?window.navigator.userAgent:"userAgent")+"_"+(new Date).getTime()+"_xes")||"")}}),pe("xesId"))?pe("xesId"):ge("xesId",fe((window.returnCitySN?window.returnCitySN.cip:"0.0.0.0")+"_"+(window.navigator.userAgent?navigator.userAgent:"userAgent")+"_"+(new Date).getTime()))}function Le(a,e){var n=window.Vue||e;if(n&&n.config){var c=n.config.errorHandler;n.config.errorHandler=function(e,n,t){var r={};"[object Object]"===Object.prototype.toString.call(n)&&(r.componentName=function(e){if(e.$root===e)return"root instance";var n=e._isVue?e.$options.name||e.$options._componentTag:e.name;return(n?"component <"+n+">":"anonymous component")+(e._isVue&&e.$options.__file?" at "+e.$options.__file:"")}(n),r.propsData=n.$options.propsData),void 0!==t&&(r.lifecycleHook=t);var o=E.computeStackTrace(e);o.type="Script";var i=o.stack[0];o.url=i.url||"",o.line=i.line||"",o.col=i.column||"",o.fileName=i.url||"",o.msg=o.message||"",o.vue=r,delete o.message,o.msg&&("string"==typeof o.msg||o.msg instanceof String)&&-1===o.msg.indexOf("Script error")&&a(o,"c","js"),"function"==typeof c&&c.call(this,e,n,t),console.log(e)}}}function Ne(e,n){Ne.fn.setOption(e),Ne.fn.init(n)}return(Ne.fn=Ne.prototype={constructor:Ne}).setOption=function(r){var o=this;if(r=r||{},this.opts={common:{},cacheUploader:{},network:{},runtime:{},performance:{},clickMsg:{},loadMsg:{},resource:{},hashchange:{},vue:{},trace:{},appid:{},param:{}},!r.common||!r.common.eventid)throw new Error("请填写{common.eventid}字段");this.opts.common.eventid=r.common.eventid,r.appid&&(this.opts.appid=r.appid),r.param&&(this.opts.param=r.param);function e(e,n,t){r[e]&&void 0!==r[e][n]?o.opts[e][n]=r[e][n]:o.opts[e][n]=t}e("network","open",!0),e("network","sample",1),e("clickMsg","open",!0),e("loadMsg","open",!0),e("runtime","open",!0),e("runtime","sample",1),e("resource","open",!0),e("resource","sample",1),e("hashchange","open",!0),e("hashchange","pvid","hash"),e("hashchange","pageuid",{}),e("hashchange","loadParam",{}),e("performance","open",!0),e("performance","sample",1),e("cacheUploader","interval",1e4),e("cacheUploader","batch",5),e("vue","errorHandler",!1),e("trace","open",!1)},Ne.fn.init=function(e){var n=(window.__XES_LOG__=this).opts;this._state={pvid:i()||"",ajaxid:0,logorder:1},Te(),this.instantUploader=ke(this._state,n),this.cacheUploader=Ee(this._state,n),n.vue.errorHandler&&Le(this.cacheUploader,e),n.network.open&&function(s,u,d){!function(){if(window.XMLHttpRequest){var c=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(e,n,t){var r=this,o=[].slice.call(arguments),i=r.onreadystatechange||function(){},a={url:n||"",method:e||""};return r.onreadystatechange=function(){if(a.url=o[1],0===r.readyState);else if(1===r.readyState)a.filter=!0,a.url&&("string"==typeof a.url||a.url instanceof String)&&-1===a.url.indexOf("https://log-landsat.kmf.com/appid/")&&(-1!==a.url.indexOf("https://code.kmf.com/dist/libs/fe-log/kmf.com")||-1!==a.url.indexOf("https://code.kmf.com/dist/libs/fe-log/xesv5.com"))&&(a.filter=!1,a.startTime=+new Date,a.traceid=(u.pvid||"")+"-"+u.ajaxid,u.ajaxid++,d.trace.open&&(r.setRequestHeader("traceid",a.traceid),r.setRequestHeader("rpcid","1")));else if(2===r.readyState);else if(3===r.readyState);else if(4===r.readyState){var e;if(Math.random()<d.network.sample&&!a.filter)a.endTime=+new Date,a.time=a.endTime-(a.startTime||0),a.status=r.status,a.statusText=r.statusText,a.response=2e3<r.response.length?r.response.substr(0,2e3):r.response,e=200<=r.status&&r.status<300||304===r.status?{elapsedTime:a.time,method:a.method,resourceUrl:a.url,response:a.response,status:a.status,statusText:a.statusText,type:"Performance-Ajax",traceid:a.traceid}:{elapsedTime:a.time,method:a.method,resourceUrl:a.url,response:a.response,status:a.status,statusText:a.statusText,type:"Ajax",traceid:a.traceid},s(e,"c","network");if(!a.filter&&d.trace.open){var n={type:"ajaxTraceLog",traceid:a.traceid,rpcid:"1",ajaxUrl:a.url};s(n,"c","network")}}return i.apply(r,arguments)},c.apply(r,arguments)}}}()}(this.cacheUploader,this._state,n),n.clickMsg.open&&(o(this.instantUploader,n),this.clickMsg=function(a,c){return function(e){void 0===e.elem&&(e.elem=window.document.body);var n={elemname:e.elem.tagName.toLowerCase().toString(),posx:g(e.elem).left.toString(),posy:g(e.elem).top.toString(),currentpagescreen:p(),p_hight:m(),ajaxhref:""};if(e.elem?n.elemname=e.elem.tagName.toLowerCase().toString():n.elemname=window.document.body.tagName.toLowerCase().toString(),Object.assign(n,c.param),c.hashchange&&c.hashchange.open&&c.hashchange.pvid&&"hash"===c.hashchange.pvid){var t=u();""===t&&(t="index"),t in c.hashchange.pageuid&&(n.pageuid=c.hashchange.pageuid[t].toString())}if("string"==typeof e.params||e.params instanceof String){var r=h(e.params);for(var o in r)n[o]=r[o].toString()}else if("object"===s(e.params))for(var i in e.params)n[i]=e.params[i].toString();a(n,"b","click")}}(this.instantUploader,n)),n.loadMsg.open&&w(this.instantUploader,n),this.loadMsg=function(a,c){return function(i){setTimeout(function(){var e={resolution:d(),pageviewsize:l(),currentpagescreen:p(),loadstatus:"success"};if(Object.assign(e,c.param),"string"==typeof window.courseDatanSerach||window.courseDatanSerach instanceof String){var n=h(window.courseDatanSerach);for(var t in n)e[t]=n[t].toString()}else if("object"===s(window.courseDatanSerach))for(var r in window.courseDatanSerach)e[r]=window.courseDatanSerach[r].toString();if(c.hashchange&&c.hashchange.open&&c.hashchange.pvid&&"hash"===c.hashchange.pvid){var o=u();""===o&&(o="index"),o in c.hashchange.pageuid&&(e.pageuid=c.hashchange.pageuid[o].toString()),o in c.hashchange.loadParam&&Object.assign(e,c.hashchange.loadParam[o])}Object.assign(e,i),a(e,"a","load")},300)}}(this.instantUploader,n),n.resource.open&&Math.random()<n.resource.sample&&function(r){if(window.__sourceError&&window.__sourceError.constructor===Array)for(var e=0;e<window.__sourceError.length;e++)n(window.__sourceError[e]);function n(e){if(e.target.tagName){var n={},t=e.target?e.target:e.srcElement;n.outerHTML=(t&&t.outerHTML).slice(0,200),n.timestamp=e.timeStamp||"",n.XPath=function(e){for(var n=[];e&&e.nodeType===window.Node.ELEMENT_NODE;e=e.parentNode){var t,r=0,o=!1;for(t=e.previousSibling;t;t=t.previousSibling)t.nodeType!==window.Node.DOCUMENT_TYPE_NODE&&t.nodeName===e.nodeName&&++r;for(t=e.nextSibling;t&&!o;t=t.nextSibling)t.nodeName===e.nodeName&&(o=!0);var i=(e.prefix?e.prefix+":":"")+e.localName,a=r||o?"["+(r+1)+"]":"";n.splice(0,0,i+a)}return n.length?"/"+n.join("/"):null}(t),n.selector=function(e){for(var n=[];e.parentNode;){if(e.id){n.unshift("#"+e.id);break}if(e===e.ownerDocument.documentElement)n.unshift(e.tagName);else{for(var t=1,r=e;r.previousElementSibling;r=r.previousElementSibling,t++);n.unshift(e.tagName+":nth-child("+t+")")}e=e.parentNode}return n.join(" > ")}(t),n.type="Resource",n.url=e.target&&e.target.src||e.target.href||"",n.baseURI=e.target&&e.target.baseURI||"",n.tagName=e.target&&e.target.tagName||"",n.url&&("string"==typeof n.url||n.url instanceof String)&&0!==n.url.indexOf("https://log-landsat.kmf.com/appid/")&&r(n,"c","res")}}window.addEventListener&&window.addEventListener("error",n,!0)}(this.cacheUploader),n.runtime.open&&Math.random()<n.runtime.sample&&(function(t){E.report.subscribe(function(e){if(e&&e.stack&&e.stack instanceof Array&&e.stack.length){e.type="Script";var n=e.stack[0];e.url=n.url||"",e.line=n.line||"",e.col=n.column||"",e.fileName=n.url||"",e.msg=e.message||"",delete e.message,e.msg&&("string"==typeof e.msg||e.msg instanceof String)&&-1===e.msg.indexOf("Script error")&&t(e,"c","js")}})}(this.cacheUploader),G(this.cacheUploader)),n.hashchange.open&&V(this.instantUploader,this._state,n),n.performance.open&&Math.random()<n.performance.sample&&K(this.cacheUploader)},Ne.install=function(e,n){var t;e.prototype.$xesLogger||(t=new Ne(n,e),e.prototype.$xesLogger=t)},Ne});
//# sourceMappingURL=index.js.map
